openapi: 3.0.0
info:
  title: SinglePageStartup API
  description: Complete API documentation for SinglePageStartup
  version: 1.0.0
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:4000/api
    description: Local development
  - url: https://api.singlepagestartup.com/api
    description: Production server

security:
  - bearerAuth: []
  - cookieAuth: []

paths:
  # host/layout
  /host/layouts:
    $ref: "../../libs/modules/host/models/layout/sdk/model/src/lib/paths.yaml#/paths/~1host~1layouts"
  /host/layouts/{id}:
    $ref: "../../libs/modules/host/models/layout/sdk/model/src/lib/paths.yaml#/paths/~1host~1layouts~1{id}"

  # host/page
  /host/pages:
    $ref: "../../libs/modules/host/models/page/sdk/model/src/lib/paths.yaml#/paths/~1host~1pages"
  /host/pages/{id}:
    $ref: "../../libs/modules/host/models/page/sdk/model/src/lib/paths.yaml#/paths/~1host~1pages~1{id}"

  # host/metadata
  /host/metadata:
    $ref: "../../libs/modules/host/models/metadata/sdk/model/src/lib/paths.yaml#/paths/~1host~1metadata"
  /host/metadata/{id}:
    $ref: "../../libs/modules/host/models/metadata/sdk/model/src/lib/paths.yaml#/paths/~1host~1metadata~1{id}"

  # host/widget
  /host/widgets:
    $ref: "../../libs/modules/host/models/widget/sdk/model/src/lib/paths.yaml#/paths/~1host~1widgets"
  /host/widgets/{id}:
    $ref: "../../libs/modules/host/models/widget/sdk/model/src/lib/paths.yaml#/paths/~1host~1widgets~1{id}"

  # host/layouts-to-widgets
  /host/layouts-to-widgets:
    $ref: "../../libs/modules/host/relations/layouts-to-widgets/sdk/model/src/lib/paths.yaml#/paths/~1host~1layouts-to-widgets"
  /host/layouts-to-widgets/{id}:
    $ref: "../../libs/modules/host/relations/layouts-to-widgets/sdk/model/src/lib/paths.yaml#/paths/~1host~1layouts-to-widgets~1{id}"

  # host/pages-to-layouts
  /host/pages-to-layouts:
    $ref: "../../libs/modules/host/relations/pages-to-layouts/sdk/model/src/lib/paths.yaml#/paths/~1host~1pages-to-layouts"
  /host/pages-to-layouts/{id}:
    $ref: "../../libs/modules/host/relations/pages-to-layouts/sdk/model/src/lib/paths.yaml#/paths/~1host~1pages-to-layouts~1{id}"

  # host/pages-to-metadata
  /host/pages-to-metadata:
    $ref: "../../libs/modules/host/relations/pages-to-metadata/sdk/model/src/lib/paths.yaml#/paths/~1host~1pages-to-metadata"
  /host/pages-to-metadata/{id}:
    $ref: "../../libs/modules/host/relations/pages-to-metadata/sdk/model/src/lib/paths.yaml#/paths/~1host~1pages-to-metadata~1{id}"

  # host/pages-to-widgets
  /host/pages-to-widgets:
    $ref: "../../libs/modules/host/relations/pages-to-widgets/sdk/model/src/lib/paths.yaml#/paths/~1host~1pages-to-widgets"
  /host/pages-to-widgets/{id}:
    $ref: "../../libs/modules/host/relations/pages-to-widgets/sdk/model/src/lib/paths.yaml#/paths/~1host~1pages-to-widgets~1{id}"

  # host/widgets-to-external-widgets
  /host/widgets-to-external-widgets:
    $ref: "../../libs/modules/host/relations/widgets-to-external-widgets/sdk/model/src/lib/paths.yaml#/paths/~1host~1widgets-to-external-widgets"
  /host/widgets-to-external-widgets/{id}:
    $ref: "../../libs/modules/host/relations/widgets-to-external-widgets/sdk/model/src/lib/paths.yaml#/paths/~1host~1widgets-to-external-widgets~1{id}"

  # rbac/action
  /rbac/actions:
    $ref: "../../libs/modules/rbac/models/action/sdk/model/src/lib/paths.yaml#/paths/~1rbac~1actions"
  /rbac/actions/{id}:
    $ref: "../../libs/modules/rbac/models/action/sdk/model/src/lib/paths.yaml#/paths/~1rbac~1actions~1{id}"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Bearer token authentication (JWT)
    cookieAuth:
      type: apiKey
      in: cookie
      name: session
      description: Session cookie authentication

  parameters:
    $ref: "./components/parameters.yaml"

  schemas:
    "host-layout":
      $ref: "../../libs/modules/host/models/layout/sdk/model/src/lib/host-layout.yaml"
    "host-layout-input":
      $ref: "../../libs/modules/host/models/layout/sdk/model/src/lib/host-layout-input.yaml"
    "host-page":
      $ref: "../../libs/modules/host/models/page/sdk/model/src/lib/host-page.yaml"
    "host-page-input":
      $ref: "../../libs/modules/host/models/page/sdk/model/src/lib/host-page-input.yaml"
    "host-metadata":
      $ref: "../../libs/modules/host/models/metadata/sdk/model/src/lib/host-metadata.yaml"
    "host-metadata-input":
      $ref: "../../libs/modules/host/models/metadata/sdk/model/src/lib/host-metadata-input.yaml"
    "host-widget":
      $ref: "../../libs/modules/host/models/widget/sdk/model/src/lib/host-widget.yaml"
    "host-widget-input":
      $ref: "../../libs/modules/host/models/widget/sdk/model/src/lib/host-widget-input.yaml"
    "host-layouts-to-widgets":
      $ref: "../../libs/modules/host/relations/layouts-to-widgets/sdk/model/src/lib/host-layouts-to-widgets.yaml"
    "host-layouts-to-widgets-input":
      $ref: "../../libs/modules/host/relations/layouts-to-widgets/sdk/model/src/lib/host-layouts-to-widgets-input.yaml"
    "host-pages-to-layouts":
      $ref: "../../libs/modules/host/relations/pages-to-layouts/sdk/model/src/lib/host-pages-to-layouts.yaml"
    "host-pages-to-layouts-input":
      $ref: "../../libs/modules/host/relations/pages-to-layouts/sdk/model/src/lib/host-pages-to-layouts-input.yaml"
    "host-pages-to-metadata":
      $ref: "../../libs/modules/host/relations/pages-to-metadata/sdk/model/src/lib/host-pages-to-metadata.yaml"
    "host-pages-to-metadata-input":
      $ref: "../../libs/modules/host/relations/pages-to-metadata/sdk/model/src/lib/host-pages-to-metadata-input.yaml"
    "host-pages-to-widgets":
      $ref: "../../libs/modules/host/relations/pages-to-widgets/sdk/model/src/lib/host-pages-to-widgets.yaml"
    "host-pages-to-widgets-input":
      $ref: "../../libs/modules/host/relations/pages-to-widgets/sdk/model/src/lib/host-pages-to-widgets-input.yaml"
    "host-widgets-to-external-widgets":
      $ref: "../../libs/modules/host/relations/widgets-to-external-widgets/sdk/model/src/lib/host-widgets-to-external-widgets.yaml"
    "host-widgets-to-external-widgets-input":
      $ref: "../../libs/modules/host/relations/widgets-to-external-widgets/sdk/model/src/lib/host-widgets-to-external-widgets-input.yaml"
    "rbac-action":
      $ref: "../../libs/modules/rbac/models/action/sdk/model/src/lib/rbac-action.yaml"
    "rbac-action-input":
      $ref: "../../libs/modules/rbac/models/action/sdk/model/src/lib/rbac-action-input.yaml"

  responses:
    $ref: "./components/responses.yaml"
